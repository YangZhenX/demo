/*!
 *  build: vue-admin-beautiful 
 *  vue-admin-beautiful author: chuzhixin 1204505056@qq.com 
 *  vue-admin-beautiful QQ Group(QQ群): 972435319、1139183756 
 *  time: 2021-3-24 14:16:49
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0dc47af4"],{"022e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userManagement-container"},[a("el-form",{staticStyle:{float:"right"},attrs:{inline:!0,model:e.form},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setQuantity("danpin")}}},[e._v(" 一键配置单品额度 ")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setQuantity("taocan")}}},[e._v(" 一键配置套餐额度 ")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.setQuantity("qiyong")}}},[e._v(" 一键配置启用单品额度 ")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,height:"480",border:"","element-loading-text":e.elementLoadingText}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"companyName",label:"公司名称","min-width":"25%"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"enabledFlag",label:"是否启用","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return["Y"==t.row.enabledFlag?a("label",[e._v("是")]):e._e(),"N"==t.row.enabledFlag?a("label",[e._v("否")]):e._e()]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"ext4",label:"区域","min-width":"13%"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"dpYearNum",label:"单品剩余额度","min-width":"12%"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"tcYearNum",label:"套餐剩余额度","min-width":"12%"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"isDp",label:"启用单品额度","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return["Y"==t.row.isDp?a("label",[e._v("启用")]):e._e(),"N"==t.row.isDp?a("label",[e._v("不启用")]):e._e()]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"操作","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(r)}}},[e._v("编辑")])]}}])})],1),a("edit",{ref:"edit"}),a("setQuantity",{ref:"setQuantity"})],1)},o=[],n=(a("caad"),a("2532"),a("96cf"),a("1da1")),i=a("9bae"),s=a("227a"),l=a("671b"),c={name:"companyManagement",components:{Edit:s["default"],SetQuantity:l["default"]},data:function(){return{list:[],elementLoadingText:"正在加载...",form:{userPid:"",searchData:""}}},created:function(){this.fetchData()},methods:{setQuantity:function(e){this.$refs["setQuantity"].showSetQuantity(e)},handleEdit:function(e){void 0!=e&&this.$refs["edit"].showEdit(e)},fetchData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["companyMasterList"])(e.form).then((function(t){var a=t.message;a.includes("请重新登录")?e.$message.error("无token信息，请重新登录。"):200==t.code&&(e.list=t.data)}));case 2:case"end":return t.stop()}}),t)})))()}}},u=c,m=(a("a3de3"),a("2877")),f=Object(m["a"])(u,r,o,!1,null,null,null);t["default"]=f.exports},"227a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"公司名称",prop:"companyName"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName","string"===typeof t?t.trim():t)},expression:"form.companyName"}})],1),a("el-form-item",{attrs:{label:"区域",prop:"ext4"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.ext4,callback:function(t){e.$set(e.form,"ext4","string"===typeof t?t.trim():t)},expression:"form.ext4"}})],1),a("el-form-item",{attrs:{label:"单品剩余额度",prop:"dpYearNum"}},[a("el-input",{attrs:{autocomplete:"off",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.form.dpYearNum,callback:function(t){e.$set(e.form,"dpYearNum","string"===typeof t?t.trim():t)},expression:"form.dpYearNum"}})],1),a("el-form-item",{attrs:{label:"套餐剩余额度",prop:"tcYearNum"}},[a("el-input",{attrs:{autocomplete:"off",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.form.tcYearNum,callback:function(t){e.$set(e.form,"tcYearNum","string"===typeof t?t.trim():t)},expression:"form.tcYearNum"}})],1),a("el-form-item",{attrs:{label:"启用单品额度",prop:"isDp"}},[a("el-radio-group",{model:{value:e.form.isDp,callback:function(t){e.$set(e.form,"isDp",t)},expression:"form.isDp"}},[a("el-radio",{attrs:{label:"Y"}},[e._v("启用")]),a("el-radio",{attrs:{label:"N"}},[e._v("不启用")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)},o=[],n=(a("caad"),a("2532"),a("96cf"),a("1da1")),i=a("9bae"),s={name:"companyManagementEdit",data:function(){return{title:"",dialogFormVisible:!1,form:{pid:"",companyId:"",companyName:"",enabledFlag:"",rem:"",ext4:"",yqmPid:"",dpYearNum:"",tcYearNum:"",isDp:"Y"},rules:{companyName:[{required:!0,trigger:"blur",message:"请输入分公司名称"}],dpYearNum:[{required:!0,trigger:"blur",message:"请输入单品总年度额度"}],tcYearNum:[{required:!0,trigger:"blur",message:"请输入套餐年度额度"}],isDp:[{required:!0,trigger:"blur",message:"请选择是否启用"}]}}},created:function(){},methods:{showEdit:function(e){this.title="编辑分公司",this.form=Object.assign({},e),this.dialogFormVisible=!0},close:function(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save:function(){var e=this;this.$refs["form"].validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,Object(i["editCompany"])(e.form).then((function(t){var a=t.message;a.includes("请重新登录")?e.$message.error("无token信息，请重新登录。"):200==t.code?(e.$message({message:"保存分公司成功",type:"success"}),e.close(),e.$parent.fetchData()):1==t.code&&e.$message({message:"保存分公司失败",type:"warning"})})).catch((function(e){console.log(e)}));case 3:t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},l=s,c=a("2877"),u=Object(c["a"])(l,r,o,!1,null,null,null);t["default"]=u.exports},"23b5":function(e,t,a){},"671b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"380px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"140px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"qiyong"!=e.checkType,expression:"checkType != 'qiyong'"}],attrs:{label:e.label}},[a("el-input",{attrs:{autocomplete:"off",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.form.setData,callback:function(t){e.$set(e.form,"setData","string"===typeof t?t.trim():t)},expression:"form.setData"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"qiyong"==e.checkType,expression:"checkType == 'qiyong'"}],attrs:{label:e.label}},[a("el-radio-group",{model:{value:e.form.setData,callback:function(t){e.$set(e.form,"setData",t)},expression:"form.setData"}},[a("el-radio",{attrs:{label:"Y"}},[e._v("启用")]),a("el-radio",{attrs:{label:"N"}},[e._v("不启用")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)},o=[],n=(a("caad"),a("2532"),a("96cf"),a("1da1")),i=a("5530"),s=a("9bae"),l=a("2f62"),c={name:"companySetQuantity",computed:Object(i["a"])({},Object(l["c"])({userdata:"user/userdata"})),data:function(){return{title:"",label:"",checkType:"",dialogFormVisible:!1,form:{userPid:"",setType:"",setData:""}}},methods:{showSetQuantity:function(e){"danpin"==e?(this.title="一键配置单品额度",this.label="单品剩余额度:"):"taocan"==e?(this.title="一键配置套餐额度",this.label="套餐剩余额度:"):"qiyong"==e&&(this.title="一键配置启用单品额度",this.label="是否启用单品额度:"),this.checkType=e,this.form.setType=e,this.dialogFormVisible=!0},close:function(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.userPid=e.userdata.userPid,""!=e.form.setData&&null!=e.form.setData){t.next=4;break}return"qiyong"==e.checkType?e.$message({message:"请选择是否启用",type:"warning"}):e.$message({message:"请输入数量",type:"warning"}),t.abrupt("return",!1);case 4:return t.next=6,Object(s["setQuantity"])(e.form.userPid,e.form.setType,e.form.setData).then((function(t){var a=t.message;a.includes("请重新登录")?e.$message.error("无token信息，请重新登录。"):200==t.code?(e.$message({message:t.message,type:"success"}),e.close(),e.$parent.fetchData()):1==t.code&&e.$message({message:t.message,type:"warning"})})).catch((function(e){console.log(e)}));case 6:case"end":return t.stop()}}),t)})))()}}},u=c,m=a("2877"),f=Object(m["a"])(u,r,o,!1,null,null,null);t["default"]=f.exports},"9bae":function(e,t,a){"use strict";a.r(t),a.d(t,"companyMasterList",(function(){return o})),a.d(t,"getCompanyMasterByEnabledFlag",(function(){return n})),a.d(t,"editCompany",(function(){return i})),a.d(t,"setQuantity",(function(){return s}));var r=a("8b2a");function o(e){return Object(r["default"])({url:"/companymaster/list",method:"post",data:e})}function n(e){return Object(r["default"])({url:"/companymaster/list/"+e,method:"get"})}function i(e){return Object(r["default"])({url:"/companymaster/save",method:"post",data:e})}function s(e,t,a){return Object(r["default"])({url:"/companymaster/saveBatchYearQuota/"+e+"/"+t+"/"+a,method:"get"})}},a3de3:function(e,t,a){"use strict";a("23b5")}}]);