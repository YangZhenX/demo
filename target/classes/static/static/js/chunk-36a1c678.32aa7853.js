/*!
 *  build: vue-admin-beautiful 
 *  vue-admin-beautiful author: chuzhixin 1204505056@qq.com 
 *  vue-admin-beautiful QQ Group(QQ群): 972435319、1139183756 
 *  time: 2021-3-24 14:16:49
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36a1c678"],{7407:function(e,t,a){"use strict";a.r(t),a.d(t,"causeMasterList",(function(){return r})),a.d(t,"editCause",(function(){return l})),a.d(t,"deleteCause",(function(){return n})),a.d(t,"getCompanyList",(function(){return s}));var o=a("8b2a");function r(e){return Object(o["default"])({url:"/causemaster/list",method:"post",data:e})}function l(e){return Object(o["default"])({url:"/causemaster/save",method:"post",data:e})}function n(e){return Object(o["default"])({url:"/causemaster/"+e,method:"delete"})}function s(){return Object(o["default"])({url:"/dealersmaster/getCompanyList",method:"post"})}},8165:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userManagement-container"},[a("vab-query-form",[a("vab-query-form-left-panel",{staticStyle:{"margin-top":"0%","margin-bottom":"0%"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0,model:e.form},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"公司:"}},[a("el-select",{attrs:{placeholder:"请选择公司"},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}},[a("el-option",{attrs:{label:"全部",value:"%"}}),e._l(e.openData,(function(e){return a("el-option",{key:e.companyName,attrs:{label:e.companyName,value:e.companyName}})}))],2)],1),a("el-form-item",{attrs:{label:"部门:"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择部门"},model:{value:e.form.departName,callback:function(t){e.$set(e.form,"departName",t)},expression:"form.departName"}},[a("el-option",{attrs:{label:"全部",value:"%"}}),e._l(e.departList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],2)],1),a("el-form-item",{attrs:{label:"是否启用:"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择是否启用"},model:{value:e.form.enabledflag,callback:function(t){e.$set(e.form,"enabledflag",t)},expression:"form.enabledflag"}},[a("el-option",{attrs:{label:"全部",value:"%"}}),a("el-option",{attrs:{label:"是",value:"Y"}}),a("el-option",{attrs:{label:"否",value:"N"}})],1)],1),a("el-form-item",[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入工号/名称/手机号",clearable:""},model:{value:e.form.searchData,callback:function(t){e.$set(e.form,"searchData","string"===typeof t?t.trim():t)},expression:"form.searchData"}})],1),a("el-form-item",[a("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.queryData}},[e._v(" 查询 ")])],1)],1)],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"","element-loading-text":e.elementLoadingText}},[a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"jobNo",label:"用户工号",width:"150"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"userName",label:"用户名称",width:"200"}}),e._e(),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"phone",label:"手机号码",width:"150"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"companyName",label:"公司名称",width:"300"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"departName",label:"所属部门名称",width:"150"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"email",label:"邮箱",width:"180"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"enabledflag",label:"是否启用",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["Y"==t.row.enabledflag?a("label",[e._v("是")]):e._e(),"N"==t.row.enabledflag?a("label",[e._v("否")]):e._e()]}}])}),e._e(),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"address",label:"收货地址",width:"200"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"roleName",label:"角色名称",width:"180"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"openDate",label:"同步日期",width:"180"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"dataRoleName",label:"数据角色",width:"180"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"操作",width:"100",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.row;return[a("el-button",{attrs:{type:"text"},on:{click:function(t){return e.handleEdit(o)}}},[e._v("编辑")])]}}])})],1),a("el-pagination",{attrs:{background:"","current-page":e.form.pageno,"page-size":this.pageSize,layout:e.layout,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("edit",{ref:"edit",on:{"fetch-data":e.fetchData}})],1)},r=[],l=(a("caad"),a("2532"),a("96cf"),a("1da1")),n=a("9df4"),s=a("7407"),i=a("a4e8"),c={name:"UserManagement",components:{Edit:i["default"]},data:function(){return{list:[],layout:"total, prev, pager, next, jumper",total:0,selectRows:"",elementLoadingText:"正在加载...",openData:[],departList:[],pageSize:10,form:{pageno:1,searchData:"",userPid:"",companyName:"%",enabledflag:"%",departName:"%"}}},created:function(){this.companyList(),this.getDepartList(),this.fetchData()},methods:{companyList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["getCompanyList"])();case 2:a=t.sent,o=a.data,e.openData=o;case 5:case"end":return t.stop()}}),t)})))()},getDepartList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["getAllDepartList"])();case 2:a=t.sent,e.departList=a.data;case 4:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){e.userPid&&this.$refs["edit"].showEdit(e)},handleSizeChange:function(e){this.form.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.form.pageno=e,this.fetchData()},queryData:function(){this.form.pageno=1,this.fetchData()},fetchData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["userMasterList"])(e.form).then((function(t){var a=t.message;a.includes("请重新登录")?e.$message.error("无token信息，请重新登录。"):200==t.code&&(e.list=t.data.dataList,e.total=t.data.total)}));case 2:case"end":return t.stop()}}),t)})))()}}},u=c,m=a("2877"),d=Object(m["a"])(u,o,r,!1,null,null,null);t["default"]=d.exports},"841a":function(e,t,a){"use strict";a("eda7")},"9df4":function(e,t,a){"use strict";a.r(t),a.d(t,"userMasterList",(function(){return r})),a.d(t,"getAllRole",(function(){return l})),a.d(t,"getAllDataRole",(function(){return n})),a.d(t,"editUserData",(function(){return s})),a.d(t,"getAllDepartList",(function(){return i}));a("b775");var o=a("8b2a");a("7d92"),a("f121");function r(e){return Object(o["default"])({url:"/usermaster/list",method:"post",data:e})}function l(){return Object(o["default"])({url:"/usermaster/getRoleList",method:"post"})}function n(){return Object(o["default"])({url:"/usermaster/getDataRoleList",method:"post"})}function s(e){return Object(o["default"])({url:"/usermaster",method:"put",data:e})}function i(){return Object(o["default"])({url:"/usermaster/getDepartList",method:"post"})}},a4e8:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"550px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[a("div",{staticClass:"el-dialog-div"},[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"用户工号",prop:"jobNo"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.jobNo,callback:function(t){e.$set(e.form,"jobNo","string"===typeof t?t.trim():t)},expression:"form.jobNo"}})],1),a("el-form-item",{attrs:{label:"用户名称",prop:"userName"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName","string"===typeof t?t.trim():t)},expression:"form.userName"}})],1),a("el-form-item",{attrs:{label:"登录密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off",disabled:!e.checked},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}}),a("el-checkbox",{on:{change:function(t){return e.handleCheckAllChange(e.checked)}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(" 修改密码 ")])],1),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone","string"===typeof t?t.trim():t)},expression:"form.phone"}})],1),a("el-form-item",{attrs:{label:"公司名称",prop:"companyName"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName","string"===typeof t?t.trim():t)},expression:"form.companyName"}})],1),a("el-form-item",{attrs:{label:"所属部门名称",prop:"departName"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.departName,callback:function(t){e.$set(e.form,"departName","string"===typeof t?t.trim():t)},expression:"form.departName"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email","string"===typeof t?t.trim():t)},expression:"form.email"}})],1),a("el-form-item",{attrs:{label:"是否启用",prop:"enabledflag"}},[a("el-radio-group",{model:{value:e.form.enabledflag,callback:function(t){e.$set(e.form,"enabledflag",t)},expression:"form.enabledflag"}},[a("el-radio",{attrs:{label:"Y"}},[e._v("是")]),a("el-radio",{attrs:{label:"N"}},[e._v("否")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"备注",prop:"rem"}},[a("el-input",{attrs:{type:"textarea",disabled:"",autocomplete:"off"},model:{value:e.form.rem,callback:function(t){e.$set(e.form,"rem",t)},expression:"form.rem"}})],1),a("el-form-item",{attrs:{label:"收货地址",prop:"address"}},[a("el-input",{attrs:{type:"textarea",autocomplete:"off"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),a("el-form-item",{attrs:{label:"权限角色",prop:"roleName"}},[a("el-select",{attrs:{placeholder:"请选择权限角色"},on:{change:function(t){return e.selectGet(t,1)}},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}},[a("el-option",{attrs:{label:"",value:""}}),e._l(e.opendateRole,(function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}))],2)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"同步日期",prop:"openDate"}},[a("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.form.openDate,callback:function(t){e.$set(e.form,"openDate","string"===typeof t?t.trim():t)},expression:"form.openDate"}})],1),a("el-form-item",{attrs:{label:"数据角色",prop:"dataRoleName"}},[a("el-select",{attrs:{placeholder:"请选择数据角色"},on:{change:function(t){return e.selectGet(t,2)}},model:{value:e.form.dataRoleName,callback:function(t){e.$set(e.form,"dataRoleName",t)},expression:"form.dataRoleName"}},[a("el-option",{attrs:{label:"",value:""}}),e._l(e.openDateDRole,(function(e){return a("el-option",{key:e.did,attrs:{label:e.dName,value:e.did}})}))],2)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.close}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)])},r=[],l=(a("7db0"),a("caad"),a("2532"),a("96cf"),a("1da1")),n=a("9df4"),s={name:"UserManagementEdit",data:function(){return{title:"编辑用户",checked:!1,opendateRole:[],openDateDRole:[],isChangePW:0,form:{userPid:"",jobNo:"",userName:"",password:"",phone:"",companyName:"",departName:"",email:"",enabledflag:"",rem:"",address:"",roleId:"",roleName:"",openDate:"",dataRoleId:"",dataRoleName:""},updataform:{userPid:"",isChangePwd:"",passWd:"",enabledflag:"",address:"",roleId:"",dataRoleId:""},rules:{password:[{required:!0,trigger:"blur",message:"请输入密码"}]},dialogFormVisible:!1}},created:function(){this.roleList(),this.dataRoleList()},methods:{roleList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["getAllRole"])();case 2:a=t.sent,o=a.data,e.opendateRole=o;case 5:case"end":return t.stop()}}),t)})))()},dataRoleList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["getAllDataRole"])();case 2:a=t.sent,o=a.data,e.openDateDRole=o;case 5:case"end":return t.stop()}}),t)})))()},selectGet:function(e,t){if(1==t)if(""!=e){var a={};a=this.opendateRole.find((function(t){return t.roleId===e})),this.form.roleId=a.roleId,this.form.roleName=a.roleName}else this.form.roleId="",this.form.roleName="";else if(2==t)if(""!=e){var o={};o=this.openDateDRole.find((function(t){return t.did===e})),this.form.dataRoleId=o.did,this.form.dataRoleName=o.dName}else this.form.dataRoleId="",this.form.dataRoleName=""},handleCheckAllChange:function(e){this.isChangePW=e?1:0},showEdit:function(e){this.form=Object.assign({},e),this.dialogFormVisible=!0},close:function(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save:function(){var e=this;this.updataform.userPid=this.form.userPid,this.updataform.isChangePwd=this.isChangePW,this.updataform.passWd=this.form.password,this.updataform.enabledflag=this.form.enabledflag,this.updataform.address=this.form.address,this.updataform.roleId=this.form.roleId,this.updataform.dataRoleId=this.form.dataRoleId,this.$refs["form"].validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,Object(n["editUserData"])(e.updataform).then((function(t){var a=t.message;a.includes("请重新登录")?e.$message.error("无token信息，请重新登录。"):200==t.code?(e.$message({message:"修改用户信息成功",type:"success"}),e.checked=!1,e.isChangePW=0,e.close(),e.$parent.fetchData()):1==t.code&&e.$message({message:"修改用户信息失败",type:"warning"})})).catch((function(e){console.log(e)}));case 3:t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},i=s,c=(a("841a"),a("2877")),u=Object(c["a"])(i,o,r,!1,null,"0dd499ec",null);t["default"]=u.exports},eda7:function(e,t,a){}}]);