/*!
 *  build: vue-admin-beautiful 
 *  vue-admin-beautiful author: chuzhixin 1204505056@qq.com 
 *  vue-admin-beautiful QQ Group(QQ群): 972435319、1139183756 
 *  time: 2021-3-24 14:16:49
 */
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3db35622","chunk-2d21d0e4"],{"136d":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"类别名称",prop:"typeName"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.typeName,callback:function(t){e.$set(e.form,"typeName","string"===typeof t?t.trim():t)},expression:"form.typeName"}})],1),r("el-form-item",{attrs:{label:"顺序",prop:"ext4"}},[r("el-input",{attrs:{autocomplete:"off",onkeyup:"value=value.replace(/[^\\d]/g,'')"},model:{value:e.form.ext4,callback:function(t){e.$set(e.form,"ext4","string"===typeof t?t.trim():t)},expression:"form.ext4"}})],1),r("el-form-item",{attrs:{label:"启用标志",prop:"enabledflag"}},[r("el-radio-group",{model:{value:e.form.enabledflag,callback:function(t){e.$set(e.form,"enabledflag",t)},expression:"form.enabledflag"}},[r("el-radio",{attrs:{label:"Y"}},[e._v("是")]),r("el-radio",{attrs:{label:"N"}},[e._v("否")])],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.close}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("确 定")])],1)],1)},i=[],n=(r("caad"),r("2532"),r("96cf"),r("1da1")),o=r("5530"),l=r("d057"),s=r("2f62"),c={name:"prodtypeManagementEdit",computed:Object(o["a"])({},Object(s["c"])({userdata:"user/userdata"})),data:function(){return{title:"",dialogFormVisible:!1,isEdit:!1,form:{pid:"",typeName:"",isSingle:"A",enabledflag:"Y",userPid:"",ext4:""},rules:{typeName:[{required:!0,trigger:"blur",message:"请输入类别名称"}],ext4:[{required:!0,trigger:"blur",message:"请输入顺序"}]}}},created:function(){},methods:{showSingleType:function(e){e?(this.title="编辑宣传品-单品类别",this.form.pid=e.id,this.form.typeName=e.label,this.form.userPid=e.userPid,this.form.ext4=e.ext4,this.form.enabledflag=e.enabledflag):this.title="添加宣传品-单品类别",this.dialogFormVisible=!0},close:function(){this.$refs["form"].resetFields(),this.form=this.$options.data().form,this.dialogFormVisible=!1},save:function(){var e=this;""==this.form.pid&&(this.form.userPid=this.userdata.userPid),this.$refs["form"].validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=5;break}return t.next=3,Object(l["editProductSingleType"])(e.form).then((function(t){var r=t.message;r.includes("请重新登录")?e.$message.error("无token信息，请重新登录。"):200==t.code?(e.$message({message:"保存类别成功",type:"success"}),e.close(),e.$parent.getProdtypeList(),e.$parent.fetchData()):1==t.code&&e.$message({message:t.message,type:"warning"})})).catch((function(e){console.log(e)}));case 3:t.next=6;break;case 5:return t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},d=c,u=r("2877"),p=Object(u["a"])(d,a,i,!1,null,null,null);t["default"]=p.exports},5193:function(e,t,r){"use strict";r("e40f")},c34d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"menuManagement-container"},[r("el-row",[r("el-col",{staticStyle:{"margin-bottom":"0%"},attrs:{xs:24,sm:24,md:8,lg:8,xl:10}},[r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(t){return e.handleAddType()}}},[e._v(" 添加类别 ")]),r("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(t){return e.handleDeleteType()}}},[e._v(" 批量删除 ")]),r("el-divider"),r("el-tree",{ref:"tree",staticStyle:{"margin-top":"-4%"},attrs:{data:e.typeTitle,"default-expand-all":"","node-key":"id","highlight-current":""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node;return r("span",{staticClass:"custom-tree-node"},[r("span",{staticStyle:{color:"#303133","text-align":"center"},attrs:{title:a.label}},[e._v(" 类别名称 ")]),r("el-button",{staticStyle:{color:"#303133","text-align":"center"},attrs:{type:"text",size:"mini"}},[e._v(" 启用 ")]),r("el-button",{staticStyle:{color:"#303133","text-align":"center"},attrs:{type:"text",size:"mini"}},[e._v(" 排序 ")]),r("el-button",{staticStyle:{color:"#303133","text-align":"center"},attrs:{type:"text",size:"mini"}},[e._v(" 操作 ")])],1)}}])}),r("el-tree",{ref:"tree",attrs:{data:e.prodtypeList,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:e.defaultProps},on:{"node-click":e.handleTreeNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return r("span",{staticClass:"custom-tree-node"},[r("span",{attrs:{title:a.label}},[e._v(e._s(a.label))]),r("el-button",{staticStyle:{color:"#303133"},attrs:{type:"text",size:"mini"}},[e._v(" "+e._s("Y"==i.enabledflag?"是":"否")+" ")]),r("el-button",{staticStyle:{color:"#303133"},attrs:{type:"text",size:"mini"}},[e._v(" "+e._s(i.ext4)+" ")]),r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.editType(i)}}},[e._v(" 编辑 ")])],1)}}])})],1),r("el-col",{staticStyle:{"border-left-style":"solid","border-width":"2px","border-color":"#e8eaec"},attrs:{xs:24,sm:24,md:16,lg:16,xl:14}},[r("vab-query-form",[r("vab-query-form-top-panel",{staticStyle:{"margin-bottom":"0%"},attrs:{span:6}},[r("div",{staticStyle:{width:"5%"}}),r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.handleAddProdtype}},[e._v(" 添加单品 ")]),r("el-button",{attrs:{icon:"el-icon-delete",type:"danger"},on:{click:e.handleDeleteProdType}},[e._v(" 批量删除单品 ")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",height:"500","element-loading-text":e.elementLoadingText},on:{"selection-change":e.setSelectRows}},[r("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"selection"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"prodName",label:"宣传品名称",width:"200"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"ext3",label:"版本号",width:"150"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"pid",label:"图片",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:e.baseUrl+"/productmaster/viewfile/"+t.row.pid+"/"+Date.now()},on:{click:function(r){return e.handlePictureCardPreview(t.row.pid)}}})]}}])}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"introduce",label:"详细介绍"}})],1)],1)],1),r("singleTypeEdit",{ref:"singTypeEdit"}),r("addType",{ref:"addType"}),r("el-dialog",{attrs:{visible:e.dialogVisible,title:e.diaTitle,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},i=[],n=(r("caad"),r("2532"),r("b85c")),o=(r("96cf"),r("1da1")),l=r("5530"),s=r("d057"),c=r("2f62"),d=r("136d"),u=r("cb73"),p=r("d4a5"),f=r.n(p),m={name:"prodtypeManagement",computed:Object(l["a"])({},Object(c["c"])({userdata:"user/userdata"})),components:{SingleTypeEdit:d["default"],AddType:u["default"]},data:function(){return{diaTitle:"查看大图",dialogImageUrl:"",dialogVisible:!1,prodtypeList:[],typeTitle:[{id:""}],defaultProps:{children:"children",label:"label"},list:[],typeData:"",elementLoadingText:"正在加载...",selectRows:"",typeList:[],pidList:[],baseUrl:""}},created:function(){this.baseUrl=f.a.newBaseUrl,this.getProdtypeList()},methods:{handleAddProdtype:function(){""==this.typeData?this.$message({message:"请先选择类别",type:"warning"}):this.$refs["addType"].showTypeNullList(this.typeData)},getProdtypeList:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["productTypeList"])("A").then((function(t){var r=t.message;if(r.includes("请重新登录"))e.$message.error("无token信息，请重新登录。");else if(200==t.code){var a,i=[],o=Object(n["a"])(t.data);try{for(o.s();!(a=o.n()).done;){var l=a.value;i.push({id:l.pid,label:l.typeName,userPid:l.userPid,ext4:l.ext4,enabledflag:l.enabledflag})}}catch(s){o.e(s)}finally{o.f()}e.prodtypeList=i}}));case 2:case"end":return t.stop()}}),t)})))()},handlePictureCardPreview:function(e){this.dialogImageUrl=this.baseUrl+"/productmaster/viewfile/"+e+"/"+Date.now(),this.dialogVisible=!0},handleAddType:function(){this.$refs["singTypeEdit"].showSingleType()},editType:function(e){this.typeData=e,this.$refs["singTypeEdit"].showSingleType(this.typeData)},handleTreeNodeClick:function(e){this.typeData=e,this.fetchData(e.id)},fetchData:function(e){var t=this;Object(s["productSingleList"])(e).then((function(e){var r=e.message;r.includes("请重新登录")?t.$message.error("无token信息，请重新登录。"):200==e.code&&(t.list=e.data)}))},handleDeleteType:function(){for(var e=this,t=this.$refs.tree.getCheckedNodes(),r=0;r<t.length;r++){var a=t[r].id;this.typeList.push(a)}this.$baseConfirm("您确定要删除所选类别吗?",null,Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["editProdTypeAndProduct"])("deleteType",e.typeList,"1").then((function(t){var r=t.message;r.includes("请重新登录")?e.$message.error("无token信息，请重新登录。"):200==t.code?(e.$message({message:"删除类别成功",type:"success"}),e.getProdtypeList(),e.fetchData()):1==t.code&&e.$message({message:"删除类别失败",type:"warning"})})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)}))))},setSelectRows:function(e){this.selectRows=e},handleDeleteProdType:function(){var e=this;this.pidList=[];for(var t=0;t<this.selectRows.length;t++){var r=this.selectRows[t].pid;this.pidList.push(r)}this.typeList.push(this.typeData.id),this.$baseConfirm("您确定要删除所选单品吗?",null,Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["editProdTypeAndProduct"])("deleteProduct",e.typeList,e.pidList).then((function(t){var r=t.message;r.includes("请重新登录")?e.$message.error("无token信息，请重新登录。"):200==t.code?(e.$message({message:"删除类别成功",type:"success"}),e.handleTreeNodeClick({id:t.data})):1==t.code&&e.$message({message:"删除类别失败",type:"warning"})})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)}))))}}},h=m,g=(r("5193"),r("2877")),b=Object(g["a"])(h,a,i,!1,null,null,null);t["default"]=b.exports},cb73:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,visible:e.dialogFormVisible,"append-to-body":"",width:"60%"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.close}},[r("div",{staticClass:"userManagement-container"},[r("vab-query-form",[r("vab-query-form-left-panel",{staticStyle:{"margin-top":"-2%","margin-bottom":"0%"},attrs:{span:12}},[r("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:e.save}},[e._v(" 添加 ")])],1),r("vab-query-form-right-panel",{staticStyle:{"margin-top":"-2%","margin-bottom":"0%"},attrs:{span:12}},[r("el-form",{attrs:{inline:!0,model:e.form},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"请输入宣传品名称",clearable:""},model:{value:e.form.searchData,callback:function(t){e.$set(e.form,"searchData","string"===typeof t?t.trim():t)},expression:"form.searchData"}})],1),r("el-form-item",[r("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.queryData}},[e._v(" 查询 ")])],1)],1)],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,height:"400",border:"","element-loading-text":e.elementLoadingText},on:{"selection-change":e.setSelectRows}},[r("el-table-column",{attrs:{"show-overflow-tooltip":"",type:"selection"}}),r("el-table-column",{attrs:{fixed:"","show-overflow-tooltip":"",prop:"prodName",label:"宣传品名称",width:"200"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"ext3",label:"版本号",width:"150"}}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"pid",label:"图片",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:e.baseUrl+"/productmaster/viewfile/"+t.row.pid+"/"+Date.now()},on:{click:function(r){return e.handlePictureCardPreview(t.row.pid)}}})]}}])}),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"introduce",label:"详细介绍"}})],1),r("el-dialog",{attrs:{visible:e.dialogVisible,title:e.diaTitle,width:"30%","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)])},i=[],n=(r("caad"),r("2532"),r("96cf"),r("1da1")),o=r("d057"),l=r("d4a5"),s=r.n(l),c={name:"prodtypeManagementAddList",computed:{},data:function(){return{title:"",baseUrl:"",elementLoadingText:"正在加载...",diaTitle:"查看大图",dialogImageUrl:"",dialogVisible:!1,dialogFormVisible:!1,list:"",selectRows:"",pidList:[],typeList:[],typeData:"",form:{searchData:""}}},created:function(){this.baseUrl=s.a.newBaseUrl},methods:{showTypeNullList:function(e){this.fetchData(),this.typeData=e,this.title="添加宣传品单品类别",this.dialogFormVisible=!0},close:function(){this.typeData="",this.dialogFormVisible=!1},queryData:function(){this.fetchData()},handlePictureCardPreview:function(e){this.dialogImageUrl=this.baseUrl+"/productmaster/viewfile/"+e+"/"+Date.now(),this.dialogVisible=!0},fetchData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["productTypeNullList"])(e.form).then((function(t){var r=t.message;r.includes("请重新登录")?e.$message.error("无token信息，请重新登录。"):200==t.code&&(e.list=t.data)}));case 2:case"end":return t.stop()}}),t)})))()},setSelectRows:function(e){this.selectRows=e},save:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.pidList=[],e.typeList.push(e.typeData.id),r=0;r<e.selectRows.length;r++)a=e.selectRows[r].pid,e.pidList.push(a);if(e.selectRows!=[]&&""!=e.selectRows){t.next=6;break}return e.$message({message:"请选择单品",type:"warning"}),t.abrupt("return",!1);case 6:return t.next=8,Object(o["editProdTypeAndProduct"])("addType",e.typeList,e.pidList).then((function(t){var r=t.message;r.includes("请重新登录")?e.$message.error("无token信息，请重新登录。"):200==t.code?(e.$message({message:"添加类别成功",type:"success"}),e.close(),e.$parent.handleTreeNodeClick({id:t.data})):1==t.code&&e.$message({message:"添加类别失败",type:"warning"})})).catch((function(e){console.log(e)}));case 8:case"end":return t.stop()}}),t)})))()}}},d=c,u=r("2877"),p=Object(u["a"])(d,a,i,!1,null,null,null);t["default"]=p.exports},d057:function(e,t,r){"use strict";r.r(t),r.d(t,"productMasterList",(function(){return i})),r.d(t,"editProduct",(function(){return n})),r.d(t,"productUpdatePic",(function(){return o})),r.d(t,"deleteProduct",(function(){return l})),r.d(t,"getProductApplyQuotaList",(function(){return s})),r.d(t,"editApplyQuota",(function(){return c})),r.d(t,"editBatchApplyQuota",(function(){return d})),r.d(t,"productSingleList",(function(){return u})),r.d(t,"editProductSingleType",(function(){return p})),r.d(t,"deleteProdType",(function(){return f})),r.d(t,"productTypeList",(function(){return m})),r.d(t,"productTypeNullList",(function(){return h})),r.d(t,"editProdTypeAndProduct",(function(){return g})),r.d(t,"productSetMealList",(function(){return b})),r.d(t,"setMealTypeNullList",(function(){return y})),r.d(t,"deleteProdSetMeal",(function(){return v})),r.d(t,"deleteMealByTypeId",(function(){return w})),r.d(t,"editProductSetMeal",(function(){return x})),r.d(t,"saveProductSetMeal",(function(){return T})),r.d(t,"showApplySetMeal",(function(){return k})),r.d(t,"saveApplySetMeal",(function(){return P}));var a=r("8b2a");function i(e){return Object(a["default"])({url:"/productmaster/list",method:"post",data:e})}function n(e){return Object(a["default"])({url:"/productmaster/save",method:"post",data:e})}function o(e){return Object(a["default"])({url:"/productmaster/savePic",method:"post",data:e})}function l(e){return Object(a["default"])({url:"/productmaster/"+e,method:"delete"})}function s(e){return Object(a["default"])({url:"/productmaster/paqList/"+e,method:"get"})}function c(e){return Object(a["default"])({url:"/productmaster/saveApplyQuota",method:"post",data:e})}function d(e){return Object(a["default"])({url:"/productmaster/saveBatchQuantity",method:"post",data:e})}function u(e){return Object(a["default"])({url:"/productsinglemaster/list/"+e,method:"get"})}function p(e){return Object(a["default"])({url:"/prodtype",method:"post",data:e})}function f(e){return Object(a["default"])({url:"/prodtype/deleteBatch/"+e,method:"delete"})}function m(e){return Object(a["default"])({url:"/prodtype/listByIsSingle/"+e,method:"get"})}function h(e){return Object(a["default"])({url:"/productmaster/TypeNullList",method:"post",data:e})}function g(e,t,r){return Object(a["default"])({url:"/productsinglemaster/edit/"+e+"/"+t+"/"+r,method:"get"})}function b(e){return Object(a["default"])({url:"/productsetmealmaster/listByType/"+e,method:"get"})}function y(e){return Object(a["default"])({url:"/productsetmealmaster/listTypeNull",method:"post",data:e})}function v(e){return Object(a["default"])({url:"/productsetmealmaster/"+e,method:"delete"})}function w(e){return Object(a["default"])({url:"/productsetmealmaster/deleteByType/"+e,method:"delete"})}function x(e){return Object(a["default"])({url:"/productsetmealmaster/save",method:"post",data:e})}function T(e){return Object(a["default"])({url:"/productsetmealmaster/saveBatch",method:"post",data:e})}function k(e){return Object(a["default"])({url:"/productsetmealmaster/applySetMeal/"+e,method:"get"})}function P(e){return Object(a["default"])({url:"/productsetmealmaster/saveApplySetMeal",method:"post",data:e})}},e40f:function(e,t,r){}}]);